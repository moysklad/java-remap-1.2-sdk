name: Issue Events to Mattermost

on:
  issues:
    types:
      - opened
      - edited
      - closed

jobs:
  notify-mattermost:
    runs-on: ubuntu-latest

    steps:
    - name: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Mattermost
      env:
        MATTERMOST_WEBHOOK_URL: ${{ secrets.MATTERMOST_WEBHOOK_URL }}
      run: |
        MESSAGE="üì¢ –ù–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ –∑–∞–¥–∞—á–µ:
        - –°–æ–±—ã—Ç–∏–µ: ${{ github.event.action }}
        - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏: ${{ github.event.issue.title }}
        - –°–æ–∑–¥–∞—Ç–µ–ª—å: ${{ github.event.issue.user.login }}
        - –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É: ${{ github.event.issue.html_url }}"

        curl -X POST -H 'Content-Type: application/json' \
        -d "{\"text\": \"$MESSAGE\"}" \
        $MATTERMOST_WEBHOOK_URL
